# 判断数组中是否有重复值。必须保证额外空间复杂度为O(1)


如果没有空间复杂度限制，可以使用哈希表实现。时间复杂度为O(N),空间复杂度O(N)。


代码如下：

```java
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

public class SortTest1 {
    public static void main(String[] args) {
        int[] a = {1, 60, 5, 2, 5, 2, 8, 100, 2, 5, 4, 3, 2};
        Map<Integer, Integer> map = new HashMap<>();
        for (int temp :
                a) {
            if (!map.containsKey(temp)) {
                map.put(temp, 1);
            } else {
                int count = map.get(temp);
                map.put(temp, ++count);
            }

        }

        //去重
        Set<Integer> keySet = map.keySet();
        Iterator<Integer> iterator = keySet.iterator();

        System.out.print("[");
        while (iterator.hasNext()) {
            Integer integer = iterator.next();
            String str = "";
            if (iterator.hasNext()) {
                str = integer + ",";

            } else {
                str = integer + "";
            }
            System.out.print(str);

        }
        System.out.print("]");
    }
}
```


运行结果：

```
[1,2,3,100,4,5,8,60]
```

若空间复杂度为O(1)，我们可以使用堆排序，堆排序的递归方式的时间复杂度为O(lgN),若使用非递归的方式，可以实现空间复杂度为O(1)（非递归的快速排序和堆排序都是时间复杂度O(n*lgn)，空间复杂度O(1)的）。

```java
import java.util.*;

public class Checker {
    public boolean checkDuplicate(int[] a, int n) {
        heapSort(a);
        for(int i=0;i<n-1;i++){
            if(a[i]==a[i+1]){
                return true;
            }
        }
        return false;
    }

    private void heapSort(int []a){
        int hi=a.length-1;
       //建堆
        for(int i=(hi-1)/2;i>=0;i--){
            sink(a,i,hi);
        }
       //下沉排序
        for(int i=hi;i>=0;i--){
            swap(a,0,i);
            sink(a,0,i-1);
        }
    }

    private void sink(int[]a,int lo,int hi){
        int child;
        while((child=lo*2+1)<=hi){
            if(child<hi&&a[child]<a[child+1])child++;
            if(a[lo]>=a[child]) break;
            swap(a,lo,child);
            lo=child;
        }
    }

    private void swap(int[] A, int i, int j) {
        int temp = A[i];
        A[i] = A[j];
        A[j] = temp;
    }

}
```




