# 索引有什么用？如何建索引？


## 索引有什么用？

  很多时候有人会问我们为啥要用数据库，把数据存放在一个文件中不就行啦，而且数据库连接，操作，那么麻烦。其实我当初也有过这种疑问，想来好笑。也许到现在我也没有真正地弄懂数据库究竟有哪些作用，但是我知道，数据库可以帮助我们高效地组织、存储和管理数据，提供高效地增删改查功能，保证数据安全性，数据完整性，提供数据备份等等一系列功能。其中索引、触发器、事务、视图等等这些功能帮助我们高效地完成数据管理和操作。这里我将介绍一下数据库的一个基本概念——索引。


例如，有3个未索引的表t1、t2、t3，分别只包含列c1、c2、c3，每个表分别含有1000行数据组成，指为1～1000的数值，查找对应值相等行的查询如下所示。
SELECT c1,c2,c3 FROM t1,t2,t3 WHERE c1=c2 AND c1=c3
此查询结果应该为1000行，每行包含3个相等的值。在无索引的情况下处理此查询，必须寻找3个表所有的组合，以便得出与WHERE子句相配的那些行。而可能的组合数目为1000×1000×1000（十亿），显然查询将会非常慢。所以我们就引进了索引。

如果对每个表进行索引，就能极大地加速查询进程。利用索引的查询处理如下。
（1）从表t1中选择第一行，查看此行所包含的数据。
（2）使用表t2上的索引，直接定位t2中与t1的值匹配的行。类似，利用表t3上的索引，直接定位t3中与来自t1的值匹配的行。
（3）扫描表t1的下一行并重复前面的过程，直到遍历t1中所有的行。
在此情形下，仍然对表t1执行了一个完全扫描，但能够在表t2和t3上进行索引查找直接取出这些表中的行，比未用索引时要快一百万倍。
利用索引，MySQL加速了WHERE子句满足条件行的搜索，而在多表连接查询时，在执行连接时加快了与其他表中的行匹配的速度。


索引能够**加速表中数据的查找和排序**，索引是一个单独建立的物理数据库，并且包含一个指向数据表中指定列的数据值指针（指向对应数据的指针）。

作用：
1. 快速查询数据
2. 保证数据的唯一性
3. 实现表与表之间的参照完整性
4. 在使用order by、group by子句进行数据检索时，利用索引可以减少排序和分组的时间。

优点：
1. 大大加快数据检索速度
2. 创建唯一索引，保证数据库表中每行数据的唯一性
3. 加速表之间的连接
4. 减少查询中分组和排序的时间


缺点：
1. 需要占用物理空间
2. 对表中数据进行增加、删除和修改时索引也要更新，降低了数据维护速度
 
索引可以分为聚簇索引和非聚簇索引。
聚簇索引：按照数据存放的物理位置为顺序，能提高多行检索的速度。
非聚簇索引：不按数据存放的物理位置顺序，对于单行的检索很快。

索引也可以分为普通索引、唯一索引、主键索引和聚集索引（也叫聚簇索引）。

## 如何建索引？

1.添加PRIMARY KEY（主键索引） 
 > mysql>ALTER TABLE \`table_name\` ADD PRIMARY KEY ( \`column\` ) 
 
2.添加UNIQUE(唯一索引) 
> mysql>ALTER TABLE \`table_name\` ADD UNIQUE ( 
\`column\` 
) 

3.添加INDEX(普通索引) 
> mysql>ALTER TABLE \`table_name\` ADD INDEX index_name ( \`column\` ) 

4.添加FULLTEXT(全文索引) 
>mysql>ALTER TABLE \`table_name\` ADD FULLTEXT ( \`column\`) 

5.添加多列索引 
>mysql>ALTER TABLE \`table_name\` ADD INDEX index_name ( \`column1\`, \`column2\`, \`column3\` )

删除索引？
```sql
DROP INDEX index_name ON talbe_name
ALTER TABLE table_name DROP INDEX index_name
ALTER TABLE table_name DROP PRIMARY KEY
```
前两条语句是等价的，删除掉table_name中的索引index_name。
第3条语句只在删除PRIMARY KEY索引时使用，因为一个表只可能有一个PRIMARY KEY索引，因此不需要指定索引名。如果没有创建PRIMARY KEY索引，但表具有一个或多个UNIQUE索引，则MySQL将删除第一个UNIQUE索引。

查看索引?

show index from tblname;
show keys from tblname;







